# Multi-Tenant Environment Variables Template
# Copy this file to .env.local and fill in your actual Supabase credentials
# NEVER commit .env.local to version control - it contains sensitive information

# Supabase Configuration
# Get these values from your Supabase project dashboard

# Your Supabase project URL
# Found in: Project Settings > API > Project URL
# Format: https://your-project-id.supabase.co
SUPABASE_URL=your_supabase_project_url_here

# Your Supabase service role key (secret key)
# Found in: Project Settings > API > service_role (secret)
# WARNING: This key has full database access - keep it secure!
# NEVER expose this key in frontend code or commit it to version control
SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here

# Optional: Supabase public/anon key (for frontend use if needed)
# Found in: Project Settings > API > anon/public
# This key is safe to use in frontend code as it has limited permissions
SUPABASE_ANON_KEY=your_supabase_anon_key_here

# Multi-Tenant Configuration
# These settings control tenant behavior and validation

# Default tenant for development/fallback scenarios
DEFAULT_TENANT=demo

# Maximum number of tenants to cache in memory
TENANT_CACHE_SIZE=100

# Tenant cache TTL in seconds (5 minutes = 300 seconds)
TENANT_CACHE_TTL=300

# Development Configuration
# Set to 'development' for local development, 'production' for live deployment
NODE_ENV=development

# Port for local development (Vercel handles this in production)
PORT=3000

# Domain Configuration for Multi-Tenant Setup
# Your base domain where tenants will be subdomains
# Format: yourdomain.com (tenants will be: tenant.yourdomain.com)
BASE_DOMAIN=yourdomain.com

# CORS Configuration for Multi-Tenant
# Specify allowed origins for CORS - use wildcards for subdomains
# Development: Allow localhost and local IPs
ALLOWED_ORIGINS_DEV=http://localhost:3000,http://127.0.0.1:3000,http://localhost:3001
# Production: Allow all subdomains of your domain
ALLOWED_ORIGINS_PROD=https://*.yourdomain.com,https://yourdomain.com

# Security Configuration
# Rate limiting configuration per tenant
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes in milliseconds
RATE_LIMIT_MAX_REQUESTS=100  # Maximum requests per tenant per window

# Tenant validation settings
ENABLE_TENANT_VALIDATION=true
REQUIRE_ACTIVE_TENANT=true

# Logging Configuration
# Enable tenant-specific logging for audit and monitoring
ENABLE_TENANT_LOGGING=true
LOG_LEVEL=info

# Database Configuration
# Connection pool settings for multi-tenant database access
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT=30000

# Tenant Isolation Configuration
# Settings for Row Level Security and tenant context
ENABLE_RLS_ENFORCEMENT=true
REQUIRE_TENANT_CONTEXT=true
AUTO_SET_TENANT_CONTEXT=true

# Performance Configuration
# Settings for optimizing multi-tenant performance
ENABLE_TENANT_CACHING=true
CACHE_TENANT_QUERIES=true
PRELOAD_TENANT_DATA=false

# Monitoring and Analytics
# Settings for tracking tenant usage and performance
ENABLE_TENANT_METRICS=true
TRACK_TENANT_USAGE=true
ENABLE_PERFORMANCE_MONITORING=true

# Development and Testing
# Settings for development and testing environments
ENABLE_DEVELOPMENT_FEATURES=true
ALLOW_TENANT_SWITCHING=true
ENABLE_DEBUG_LOGGING=true

# Backup and Maintenance
# Settings for tenant data backup and maintenance
ENABLE_TENANT_BACKUPS=true
BACKUP_RETENTION_DAYS=30
ENABLE_MAINTENANCE_MODE=false

# Instructions for Multi-Tenant Setup:
# 
# 1. SUPABASE SETUP:
#    - Copy this file to .env.local
#    - Go to your Supabase project dashboard
#    - Navigate to Project Settings > API
#    - Copy your Project URL and paste it as SUPABASE_URL
#    - Copy your service_role key and paste it as SUPABASE_SERVICE_KEY
#    - Run the multi-tenant database setup script in Supabase SQL Editor
#
# 2. DOMAIN CONFIGURATION:
#    - Update BASE_DOMAIN with your actual domain
#    - Configure DNS for wildcard subdomains (*.yourdomain.com)
#    - Set up SSL certificates for wildcard domain
#    - Configure your hosting platform for subdomain routing
#
# 3. DEVELOPMENT TESTING:
#    - For local testing, use URL parameters: localhost:3000?tenant=demo
#    - Or use subdomain format: demo-localhost:3000 (if DNS configured)
#    - Test with different tenant values: demo, acme, techcorp, startup
#
# 4. PRODUCTION DEPLOYMENT:
#    - For Vercel deployment, add these same variables in your Vercel project settings
#    - Ensure wildcard domain is properly configured
#    - Test subdomain access: demo.yourdomain.com, acme.yourdomain.com, etc.
#
# 5. SECURITY VERIFICATION:
#    - Test that tenant data is properly isolated
#    - Verify RLS policies are working
#    - Confirm cross-tenant data access is prevented
#    - Test tenant validation and error handling
#
# 6. MONITORING SETUP:
#    - Configure logging for tenant access patterns
#    - Set up monitoring for tenant-specific performance
#    - Enable alerts for tenant isolation failures
#    - Track tenant usage and resource consumption
